/*! For license information please see 334.421cbdc7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpersonal_finance_tracker=self.webpackChunkpersonal_finance_tracker||[]).push([[334],{5334:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var a=r(5043),s=r(3709),l=r(5177),i=r(1114);const n=(0,i.A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),o=(0,i.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var d=r(1184),c=r(4183),u=r(6953),g=r(7669),p=r(7897),x=r(4401);const m=(0,i.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var h=r(225),b=r(2031),y=r(579);const k=()=>{const{purchases:e,budgetGroups:t,refetchPurchases:r,userId:i}=(0,b.E)(),[k,v]=(0,a.useState)(null),[f,j]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),[C,_]=(0,a.useState)(0),[A,z]=(0,a.useState)(""),[D,I]=(0,a.useState)(""),[S,F]=(0,a.useState)({key:"timestamp",direction:"desc"}),[P,E]=(0,a.useState)(!1),[M,B]=(0,a.useState)([]),T="budget",L=async()=>{if(i)try{const{data:e,error:t}=await s.A.from("purchases").select("\n          id,\n          item_name,\n          cost,\n          timestamp,\n          budget_item_id,\n          simplefin_transaction_id,\n          is_simplefin_synced,\n          is_deleted,\n          budget_items (\n            id,\n            name,\n            budget,\n            budget_groups (\n              id,\n              name\n            )\n          )\n        ").eq("user_id",i).eq("is_deleted",!0).order("timestamp",{ascending:!1});if(t)throw t;B(e||[])}catch(e){console.error("Error fetching deleted purchases:",e)}},q=async t=>{try{const a=e.find((e=>e.id===t));if(null!==a&&void 0!==a&&a.is_simplefin_synced){const{error:e}=await s.A.from("purchases").update({is_deleted:!0}).eq("id",t);if(e)throw e}else{const{error:e}=await s.A.from("purchases").delete().eq("id",t);if(e)throw e}await r(),P&&await L()}catch(a){console.error("Error deleting purchase:",a),alert("Failed to delete purchase. Please try again.")}},U=async e=>{try{const{error:t}=await s.A.from("purchases").update({is_deleted:!1}).eq("id",e);if(t)throw t;await r(),await L()}catch(t){console.error("Error restoring purchase:",t),alert("Failed to restore purchase. Please try again.")}},K=(e,t)=>{switch(j(e),v(t.id),e){case"timestamp":w(new Date(t.timestamp).toISOString().split("T")[0]);break;case"itemName":w(t.item_name);break;case"cost":w(t.cost);break;case"budgetItemId":w(t.budget_item_id||"");break;default:w("")}},O=async(e,t)=>{try{const a={};switch(e){case"timestamp":a.timestamp=new Date(t+"T00:00:00Z").toISOString();break;case"itemName":a.item_name=t.trim();break;case"cost":a.cost=parseFloat(t)||0;break;case"budgetItemId":a.budget_item_id=t||null}const{error:l}=await s.A.from("purchases").update(a).eq("id",k);if(l)throw l;v(null),j(null),w(""),await r()}catch(a){console.error("Error updating ".concat(e,":"),a),alert("Failed to update ".concat(e,". Please try again."))}},{availableMonths:R,currentPurchases:$,currentMonthName:H,currentMonthTotal:V,purchasesByCategory:G}=(0,a.useMemo)((()=>{let t=P?[...M]:[...e];A&&(t=t.filter((e=>{var t,r,a;return(null===(t=e.item_name)||void 0===t?void 0:t.toLowerCase().includes(A.toLowerCase()))||(null===(r=e.budget_items)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase().includes(A.toLowerCase()))}))),"uncategorized"===D?t=t.filter((e=>!e.budget_item_id)):D&&(t=t.filter((e=>e.budget_item_id===D))),t.sort(((e,t)=>{var r,a,s,l,i,n;let o,d;switch(S.key){case"timestamp":o=new Date(e.timestamp),d=new Date(t.timestamp);break;case"item_name":o=(null===(r=e.item_name)||void 0===r?void 0:r.toLowerCase())||"",d=(null===(a=t.item_name)||void 0===a?void 0:a.toLowerCase())||"";break;case"cost":o=e.cost,d=t.cost;break;case"budget_item":o=(null===(s=e.budget_items)||void 0===s||null===(l=s.name)||void 0===l?void 0:l.toLowerCase())||"",d=(null===(i=t.budget_items)||void 0===i||null===(n=i.name)||void 0===n?void 0:n.toLowerCase())||"";break;default:return 0}return o<d?"asc"===S.direction?-1:1:o>d?"asc"===S.direction?1:-1:0}));const r={};t.forEach((e=>{const t=new Date(e.timestamp),a="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"));r[a]||(r[a]=[]),r[a].push(e)}));const a=Object.keys(r).sort(((e,t)=>t.localeCompare(e))),s=a[C],l=s?r[s]:[];let i="",n=0;if(l.length>0){n=l.reduce(((e,t)=>e+t.cost),0);i=new Date(s+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}let o={};if(l.length>0){l.forEach((e=>{const t=e.budget_item_id||"uncategorized";var r,a;o[t]||(o[t]={name:(null===(r=e.budget_items)||void 0===r?void 0:r.name)||"Uncategorized",budget:(null===(a=e.budget_items)||void 0===a?void 0:a.budget)||0,purchases:[]});o[t].purchases.push(e)}));const e={};Object.keys(o).sort(((e,t)=>"uncategorized"===e?1:"uncategorized"===t?-1:o[e].name.localeCompare(o[t].name))).forEach((t=>{e[t]=o[t]})),o=e}return{availableMonths:a,currentPurchases:l,currentMonthName:i,currentMonthTotal:n,purchasesByCategory:o}}),[e,M,P,A,D,S,T,C]),X=R.length,Y=e=>{F((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"})))},Z=e=>S.key!==e?(0,y.jsx)(l.A,{size:14,className:"opacity-40"}):"asc"===S.direction?(0,y.jsx)(l.A,{size:14,className:"text-blue-600 dark:text-blue-400"}):(0,y.jsx)(l.A,{size:14,className:"text-blue-600 dark:text-blue-400 rotate-180"}),J=e=>{var r;return(0,y.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors group",children:[(0,y.jsx)("td",{onClick:()=>K("timestamp",e),className:"px-6 py-4 whitespace-nowrap cursor-pointer",children:"timestamp"===f&&k===e.id?(0,y.jsx)("input",{type:"date",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("timestamp",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all",autoFocus:!0}):(0,y.jsxs)("div",{className:"flex items-center gap-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:[(0,y.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(e.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,y.jsx)(n,{size:14,className:"opacity-0 group-hover:opacity-50 transition-opacity"})]})}),(0,y.jsx)("td",{onClick:()=>K("itemName",e),className:"px-6 py-4 cursor-pointer",children:"itemName"===f&&k===e.id?(0,y.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("itemName",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all",autoFocus:!0}):(0,y.jsxs)("div",{className:"flex items-center gap-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:[(0,y.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.item_name}),(0,y.jsx)(n,{size:14,className:"opacity-0 group-hover:opacity-50 transition-opacity"})]})}),(0,y.jsx)("td",{onClick:()=>K("cost",e),className:"px-6 py-4 whitespace-nowrap cursor-pointer",children:"cost"===f&&k===e.id?(0,y.jsx)("input",{type:"number",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("cost",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all",min:"0",step:"0.01",autoFocus:!0}):(0,y.jsxs)("div",{className:"flex items-center gap-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:[(0,y.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["$",e.cost.toFixed(2)]}),(0,y.jsx)(n,{size:14,className:"opacity-0 group-hover:opacity-50 transition-opacity"})]})}),(0,y.jsx)("td",{onClick:()=>K("budgetItemId",e),className:"px-6 py-4 cursor-pointer",children:"budgetItemId"===f&&k===e.id?(0,y.jsxs)("select",{value:N||"",onChange:e=>{const t=e.target.value;w(t),O("budgetItemId",t)},onBlur:()=>{j(null),v(null)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all",autoFocus:!0,children:[(0,y.jsx)("option",{value:"",children:"Uncategorized"}),t.map((e=>{var t;return(0,y.jsx)("optgroup",{label:e.name,children:null===(t=e.budget_items)||void 0===t?void 0:t.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))},e.id)}))]}):(0,y.jsxs)("div",{className:"flex items-center gap-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:[(0,y.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200",children:(null===(r=e.budget_items)||void 0===r?void 0:r.name)||"Uncategorized"}),(0,y.jsx)(n,{size:14,className:"opacity-0 group-hover:opacity-50 transition-opacity"})]})}),(0,y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P?(0,y.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to restore this purchase?")&&U(e.id)},className:"inline-flex items-center justify-center p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-all",title:"Restore purchase",children:(0,y.jsx)(o,{size:18})}):(0,y.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this purchase?")&&q(e.id)},className:"inline-flex items-center justify-center p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",title:"Delete purchase",children:(0,y.jsx)(d.A,{size:18})})})]},e.id)};return(0,y.jsxs)("div",{className:"w-full bg-white dark:bg-slate-800 shadow-xl rounded-xl overflow-hidden",children:[(0,y.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-700 dark:to-indigo-700 px-6 py-8",children:[(0,y.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Purchase History"}),X>0&&H&&(0,y.jsxs)("div",{className:"flex items-center gap-2 text-blue-100",children:[(0,y.jsx)(c.A,{size:18}),(0,y.jsx)("span",{className:"text-lg font-medium",children:H})]})]}),(0,y.jsxs)("div",{className:"p-6 border-b dark:border-slate-700 bg-gray-50 dark:bg-slate-900/50",children:[(0,y.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,y.jsxs)("div",{className:"flex-1 relative",children:[(0,y.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20}),(0,y.jsx)("input",{type:"text",placeholder:"Search purchases...",value:A,onChange:e=>{z(e.target.value),_(0)},className:"w-full pl-10 pr-10 py-2.5 border dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),A&&(0,y.jsx)("button",{onClick:()=>z(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,y.jsx)(g.A,{size:18})})]}),(0,y.jsx)("div",{className:"sm:w-64",children:(0,y.jsxs)("select",{value:D,onChange:e=>{I(e.target.value),_(0)},className:"w-full px-4 py-2.5 border dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,y.jsx)("option",{value:"",children:"All Purchases"}),(0,y.jsx)("option",{value:"uncategorized",children:"Uncategorized"}),t.map((e=>{var t;return(0,y.jsx)("optgroup",{label:e.name,children:null===(t=e.budget_items)||void 0===t?void 0:t.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))},e.id)}))]})}),(0,y.jsx)("div",{children:(0,y.jsx)("button",{onClick:async()=>{const e=!P;E(e),e&&await L(),_(0)},className:"px-4 py-2.5 rounded-lg font-medium transition-all ".concat(P?"bg-orange-500 dark:bg-orange-600 text-white shadow-md":"bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-slate-600"),children:P?"Show Active":"Show Hidden"})})]}),(A||D)&&(0,y.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,y.jsx)("span",{children:"Active filters:"}),A&&(0,y.jsxs)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md",children:['Search: "',A,'"']}),D&&(0,y.jsx)("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-md",children:"Budget Item"}),(0,y.jsx)("button",{onClick:()=>{z(""),I("")},className:"ml-2 text-blue-600 dark:text-blue-400 hover:underline",children:"Clear all"})]})]}),0===$.length?(0,y.jsxs)("div",{className:"p-12 text-center",children:[(0,y.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-slate-700 mb-4",children:(0,y.jsx)(u.A,{className:"text-gray-400",size:32})}),(0,y.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No purchases found"}),(0,y.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:A||D?"Try adjusting your filters":"Start by adding your first purchase"})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[(0,y.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-900",children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{onClick:()=>Y("timestamp"),className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors group",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(c.A,{size:16,className:"text-gray-400"}),"Date",Z("timestamp")]})}),(0,y.jsx)("th",{onClick:()=>Y("item_name"),className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors group",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(p.A,{size:16,className:"text-gray-400"}),"Item Name",Z("item_name")]})}),(0,y.jsx)("th",{onClick:()=>Y("cost"),className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors group",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(x.A,{size:16,className:"text-gray-400"}),"Cost",Z("cost")]})}),(0,y.jsx)("th",{onClick:()=>Y("budget_item"),className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors group",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:["Budget Item",Z("budget_item")]})}),(0,y.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"})]})}),(0,y.jsx)("tbody",{className:"bg-white dark:bg-slate-800",children:Object.keys(G).length>0?Object.entries(G).map((e=>{let[t,r]=e;const s=r.purchases.reduce(((e,t)=>e+t.cost),0),l=r.budget-s;return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)("tr",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 border-y-2 border-purple-200 dark:border-purple-700",children:(0,y.jsx)("td",{colSpan:"5",className:"px-6 py-4",children:(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:(0,y.jsx)(p.A,{className:"text-purple-600 dark:text-purple-400",size:18})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:r.name}),(0,y.jsxs)("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:[r.purchases.length," ",1===r.purchases.length?"purchase":"purchases"]})]})]}),r.budget>0&&(0,y.jsxs)("div",{className:"flex items-center gap-6",children:[(0,y.jsxs)("div",{className:"text-right",children:[(0,y.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Budgeted"}),(0,y.jsxs)("div",{className:"text-base font-bold text-purple-900 dark:text-purple-100",children:["$",r.budget.toFixed(2)]})]}),(0,y.jsxs)("div",{className:"text-right",children:[(0,y.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Spent"}),(0,y.jsxs)("div",{className:"text-base font-bold ".concat(s>r.budget?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:["$",s.toFixed(2)]})]}),(0,y.jsxs)("div",{className:"text-right",children:[(0,y.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Remaining"}),(0,y.jsxs)("div",{className:"text-base font-bold ".concat(l<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:["$",l.toFixed(2)]})]})]})]})})}),r.purchases.map((e=>J(e)))]},t)})):$.map((e=>J(e)))})]})}),(0,y.jsx)("div",{className:"md:hidden px-4 py-3 space-y-3",children:Object.keys(G).length>0?Object.entries(G).map((e=>{let[r,s]=e;return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-4 border-2 border-purple-200 dark:border-purple-700 mb-2",children:(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:(0,y.jsx)(p.A,{className:"text-purple-600 dark:text-purple-400",size:16})}),(0,y.jsxs)("div",{className:"flex-1",children:[(0,y.jsx)("div",{className:"text-base font-bold text-purple-900 dark:text-purple-100",children:s.name}),(0,y.jsxs)("div",{className:"text-xs text-purple-700 dark:text-purple-300",children:[s.purchases.length," ",1===s.purchases.length?"purchase":"purchases"]})]})]})}),s.purchases.map((e=>{var r;return(0,y.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg border border-gray-200 dark:border-slate-700 p-4 transition-all duration-200 hover:scale-[1.01] ml-2",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-2.5 border-b border-gray-100 dark:border-slate-700",children:[(0,y.jsx)("div",{className:"cursor-pointer flex-1",children:"timestamp"===f&&k===e.id?(0,y.jsx)("input",{type:"date",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("timestamp",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,y.jsxs)("div",{onClick:t=>{t.stopPropagation(),K("timestamp",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("timestamp",e)},className:"flex items-center gap-1.5 active:opacity-70 transition-opacity",children:[(0,y.jsx)("div",{className:"p-1 bg-blue-50 dark:bg-blue-900/20 rounded",children:(0,y.jsx)(c.A,{size:12,className:"text-blue-600 dark:text-blue-400"})}),(0,y.jsx)("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:new Date(e.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})}),P?(0,y.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to restore this purchase?")&&U(e.id)},className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-all active:scale-95",title:"Restore purchase",children:(0,y.jsx)(o,{size:16})}):(0,y.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this purchase?")&&q(e.id)},className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all active:scale-95",title:"Delete purchase",children:(0,y.jsx)(d.A,{size:16})})]}),(0,y.jsx)("div",{className:"mb-3 cursor-pointer group",children:"itemName"===f&&k===e.id?(0,y.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("itemName",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-full px-3 py-3 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,y.jsxs)("div",{onClick:t=>{t.stopPropagation(),K("itemName",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("itemName",e)},className:"flex items-start gap-2 active:opacity-70 transition-opacity",children:[(0,y.jsx)(p.A,{size:16,className:"text-gray-400 dark:text-gray-500 mt-0.5 flex-shrink-0"}),(0,y.jsx)("h3",{className:"text-base font-bold text-gray-900 dark:text-white leading-snug flex-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.item_name})]})}),(0,y.jsxs)("div",{className:"grid grid-cols-2 gap-2.5",children:[(0,y.jsx)("div",{className:"cursor-pointer group",children:"cost"===f&&k===e.id?(0,y.jsx)("input",{type:"number",inputMode:"decimal",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("cost",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-full px-3 py-3 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",autoFocus:!0}):(0,y.jsxs)("div",{onClick:t=>{t.stopPropagation(),K("cost",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("cost",e)},className:"flex items-center justify-center gap-1 px-3 py-2 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg border border-green-200 dark:border-green-800 group-hover:shadow-sm transition-all h-full active:scale-95",children:[(0,y.jsx)(x.A,{size:16,className:"text-green-600 dark:text-green-400 flex-shrink-0"}),(0,y.jsx)("span",{className:"text-base font-bold text-green-700 dark:text-green-400 truncate",children:e.cost.toFixed(2)})]})}),(0,y.jsx)("div",{className:"cursor-pointer",children:"budgetItemId"===f&&k===e.id?(0,y.jsxs)("select",{value:N||"",onChange:e=>{const t=e.target.value;w(t),O("budgetItemId",t)},onBlur:()=>{j(null),v(null)},className:"w-full px-3 py-3 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",autoFocus:!0,children:[(0,y.jsx)("option",{value:"",children:"Uncategorized"}),t.map((e=>{var t;return(0,y.jsx)("optgroup",{label:e.name,children:null===(t=e.budget_items)||void 0===t?void 0:t.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))},e.id)}))]}):(0,y.jsx)("div",{onClick:t=>{t.stopPropagation(),K("budgetItemId",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("budgetItemId",e)},className:"flex items-center justify-center px-3 py-2 rounded-lg text-xs font-semibold bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 text-purple-700 dark:text-purple-200 border border-purple-200 dark:border-purple-800 shadow-sm h-full active:scale-95 transition-all",children:(0,y.jsx)("span",{className:"truncate",children:(null===(r=e.budget_items)||void 0===r?void 0:r.name)||"Uncategorized"})})})]})]},e.id)}))]},r)})):$.map((e=>{var r;return(0,y.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg border border-gray-200 dark:border-slate-700 p-4 transition-all duration-200 hover:scale-[1.01]",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-2.5 border-b border-gray-100 dark:border-slate-700",children:[(0,y.jsx)("div",{className:"cursor-pointer flex-1",children:"timestamp"===f&&k===e.id?(0,y.jsx)("input",{type:"date",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("timestamp",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,y.jsxs)("div",{onClick:t=>{t.stopPropagation(),K("timestamp",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("timestamp",e)},className:"flex items-center gap-1.5 active:opacity-70 transition-opacity",children:[(0,y.jsx)("div",{className:"p-1 bg-blue-50 dark:bg-blue-900/20 rounded",children:(0,y.jsx)(c.A,{size:12,className:"text-blue-600 dark:text-blue-400"})}),(0,y.jsx)("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:new Date(e.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})}),P?(0,y.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to restore this purchase?")&&U(e.id)},className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-all active:scale-95",title:"Restore purchase",children:(0,y.jsx)(o,{size:16})}):(0,y.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this purchase?")&&q(e.id)},className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all active:scale-95",title:"Delete purchase",children:(0,y.jsx)(d.A,{size:16})})]}),(0,y.jsx)("div",{className:"mb-3 cursor-pointer group",children:"itemName"===f&&k===e.id?(0,y.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("itemName",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-full px-3 py-3 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,y.jsxs)("div",{onClick:t=>{t.stopPropagation(),K("itemName",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("itemName",e)},className:"flex items-start gap-2 active:opacity-70 transition-opacity",children:[(0,y.jsx)(p.A,{size:16,className:"text-gray-400 dark:text-gray-500 mt-0.5 flex-shrink-0"}),(0,y.jsx)("h3",{className:"text-base font-bold text-gray-900 dark:text-white leading-snug flex-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.item_name})]})}),(0,y.jsxs)("div",{className:"grid grid-cols-2 gap-2.5",children:[(0,y.jsx)("div",{className:"cursor-pointer group",children:"cost"===f&&k===e.id?(0,y.jsx)("input",{type:"number",inputMode:"decimal",value:N,onChange:e=>w(e.target.value),onBlur:()=>{O("cost",N),j(null),v(null)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-full px-3 py-3 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",autoFocus:!0}):(0,y.jsxs)("div",{onClick:t=>{t.stopPropagation(),K("cost",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("cost",e)},className:"flex items-center justify-center gap-1 px-3 py-2 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg border border-green-200 dark:border-green-800 group-hover:shadow-sm transition-all h-full active:scale-95",children:[(0,y.jsx)(x.A,{size:16,className:"text-green-600 dark:text-green-400 flex-shrink-0"}),(0,y.jsx)("span",{className:"text-base font-bold text-green-700 dark:text-green-400 truncate",children:e.cost.toFixed(2)})]})}),(0,y.jsx)("div",{className:"cursor-pointer",children:"budgetItemId"===f&&k===e.id?(0,y.jsxs)("select",{value:N||"",onChange:e=>{const t=e.target.value;w(t),O("budgetItemId",t)},onBlur:()=>{j(null),v(null)},className:"w-full px-3 py-3 border dark:border-gray-600 rounded-lg bg-white dark:bg-slate-600 text-gray-800 dark:text-white text-base focus:ring-2 focus:ring-blue-500",autoFocus:!0,children:[(0,y.jsx)("option",{value:"",children:"Uncategorized"}),t.map((e=>{var t;return(0,y.jsx)("optgroup",{label:e.name,children:null===(t=e.budget_items)||void 0===t?void 0:t.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))},e.id)}))]}):(0,y.jsx)("div",{onClick:t=>{t.stopPropagation(),K("budgetItemId",e)},onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),K("budgetItemId",e)},className:"flex items-center justify-center px-3 py-2 rounded-lg text-xs font-semibold bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 text-purple-700 dark:text-purple-200 border border-purple-200 dark:border-purple-800 shadow-sm h-full active:scale-95 transition-all",children:(0,y.jsx)("span",{className:"truncate",children:(null===(r=e.budget_items)||void 0===r?void 0:r.name)||"Uncategorized"})})})]})]},e.id)}))})]}),X>0&&(0,y.jsx)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-slate-900/50 border-t dark:border-slate-700",children:(0,y.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,y.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[(0,y.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,y.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:$.length})," ",1===$.length?"purchase":"purchases"," ","in"," ",(0,y.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:H})]}),$.length>0&&(0,y.jsxs)("div",{className:"text-sm font-semibold",children:[(0,y.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total: "}),(0,y.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:["$",V.toFixed(2)]})]})]}),(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsxs)("button",{onClick:()=>{C>0&&_(C-1)},disabled:0===C,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all ".concat(0===C?"text-gray-400 dark:text-gray-600 cursor-not-allowed bg-gray-100 dark:bg-slate-800":"text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 hover:bg-gray-50 dark:hover:bg-slate-600 border border-gray-300 dark:border-slate-600"),children:[(0,y.jsx)(m,{size:18}),(0,y.jsx)("span",{className:"hidden sm:inline",children:"Previous"})]}),(0,y.jsxs)("span",{className:"px-3 sm:px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-slate-700 rounded-lg border border-gray-300 dark:border-slate-600 whitespace-nowrap",children:["Month ",C+1," of ",X]}),(0,y.jsxs)("button",{onClick:()=>{C<X-1&&_(C+1)},disabled:C===X-1,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all ".concat(C===X-1?"text-gray-400 dark:text-gray-600 cursor-not-allowed bg-gray-100 dark:bg-slate-800":"text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 hover:bg-gray-50 dark:hover:bg-slate-600 border border-gray-300 dark:border-slate-600"),children:[(0,y.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,y.jsx)(h.A,{size:18})]})]})]})})]})}},5177:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(1114).A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},4183:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(1114).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},225:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(1114).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6953:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(1114).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7897:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(1114).A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},1184:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(1114).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7669:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(1114).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);
//# sourceMappingURL=334.421cbdc7.chunk.js.map