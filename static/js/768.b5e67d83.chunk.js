/*! For license information please see 768.b5e67d83.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpersonal_finance_tracker=self.webpackChunkpersonal_finance_tracker||[]).push([[768],{768:(e,r,a)=>{a.r(r),a.d(r,{default:()=>b});var t=a(9379),s=a(5043),l=a(3709),n=a(2031),d=a(4401),o=a(4440),i=a(1114);const c=(0,i.A)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]),x=(0,i.A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var m=a(6450),u=a(1184),g=a(885),y=a(579);const b=function(){const{income:e,userId:r,refetchIncome:a}=(0,n.E)(),[i,b]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[k,f]=(0,s.useState)([]),[j,v]=(0,s.useState)(!0),N=(0,s.useRef)({}),w=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),A=(0,s.useCallback)((async()=>{if(!r)return!1;const e=[{user_id:r,tax_name:"Federal Tax",percent:0},{user_id:r,tax_name:"Medicare",percent:0},{user_id:r,tax_name:"Social Security Tax",percent:0},{user_id:r,tax_name:"State Tax",percent:0}];try{const{error:r}=await l.A.from("taxes").insert(e);return!r||(console.error("Error initializing default taxes:",r),!1)}catch(a){return console.error("Error initializing default taxes:",a),!1}}),[r]),C=(0,s.useCallback)((async()=>{if(r){v(!0);try{const{data:e,error:a}=await l.A.from("taxes").select("*").eq("user_id",r).order("tax_name",{ascending:!0});if(a)throw a;if(e&&0!==e.length)f(e);else{if(await A()){const{data:e,error:a}=await l.A.from("taxes").select("*").eq("user_id",r).order("tax_name",{ascending:!0});a||f(e||[])}}}catch(e){console.error("Error fetching taxes:",e),f([])}finally{v(!1)}}}),[r,A]);(0,s.useEffect)((()=>{C()}),[C]);const T=(0,s.useCallback)((function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;N.current[e]&&clearTimeout(N.current[e]),N.current[e]=setTimeout(r,a)}),[]),_=s=>{r&&T("income-".concat(s),(async()=>{try{const n="payFrequency"===s?h:Number(h),d=(0,t.A)((0,t.A)({},e),{},{[s]:n}),{monthlyTakeHomePay:o}=S(d);let i=n;"yearlySalary"!==s&&"retirementContribution"!==s&&"employerMatch"!==s||(i=(0,g.Rb)(n,r));const c=(0,g.Rb)(o,r),{error:x}=await l.A.from("income").update({[s]:i,monthlyTakeHome:c}).eq("id",e.id).eq("user_id",r);x?console.error("Error updating income data:",x):(b(null),await a())}catch(n){console.error("Unexpected error:",n)}}))},q=r=>{p(e[r]),b(r)},F=(e,r)=>{const a=parseFloat(r)||0;f((r=>r.map((r=>r.id===e?(0,t.A)((0,t.A)({},r),{},{percent:a}):r)))),T("tax-".concat(e),(async()=>{const{error:r}=await l.A.from("taxes").update({percent:a}).eq("id",e);r&&(console.error("Error updating tax:",r),C())}))},M=(e,r)=>{f((a=>a.map((a=>a.id===e?(0,t.A)((0,t.A)({},a),{},{tax_name:r}):a)))),T("tax-name-".concat(e),(async()=>{const{error:a}=await l.A.from("taxes").update({tax_name:r}).eq("id",e);a&&(console.error("Error updating tax name:",a),C())}))},E=async e=>{f((r=>r.filter((r=>r.id!==e))));try{const{error:r}=await l.A.from("taxes").delete().eq("id",e);r&&(console.error("Error deleting tax:",r),alert("Error deleting tax: ".concat(r.message)),C())}catch(r){console.error("Error deleting tax:",r),C()}},S=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;const{yearlySalary:a=0,retirementContribution:t=0,employerMatch:s=0}=r,l=a*(t/100),n=l+a*(s/100),d=k.reduce(((e,r)=>e+a*(r.percent/100)),0),o=a-d-l,i=k.reduce(((e,r)=>(e[r.id]=a*(r.percent/100),e)),{});return{totalAnnual401K:Number(n.toFixed(2)),takeHomePay:Number(o.toFixed(2)),monthlyTakeHomePay:Number((o/12).toFixed(4)),totalTaxes:Number(d.toFixed(2)),taxAmounts:i}},{totalAnnual401K:H,takeHomePay:P,monthlyTakeHomePay:z,totalTaxes:$,taxAmounts:B}=S();return(0,y.jsxs)("div",{className:"w-full mx-auto p-8 bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,y.jsxs)("div",{className:"flex items-center justify-center mb-8",children:[(0,y.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-full mr-4",children:(0,y.jsx)(d.A,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),(0,y.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Income & Taxes"})]}),(0,y.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-8",children:[(0,y.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-3 md:p-6 rounded-lg border-2 border-green-200 dark:border-green-700 shadow-sm",children:[(0,y.jsx)("div",{className:"text-xs md:text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Annual Take Home"}),(0,y.jsxs)("div",{className:"text-lg md:text-3xl font-bold text-green-600 dark:text-green-400",children:["$",w(P)]})]}),(0,y.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-3 md:p-6 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[(0,y.jsx)("div",{className:"text-xs md:text-sm font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Monthly Take Home"}),(0,y.jsxs)("div",{className:"text-lg md:text-3xl font-bold text-blue-600 dark:text-blue-400",children:["$",w(z)]})]}),(0,y.jsxs)("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 dark:from-cyan-900/20 dark:to-cyan-800/20 p-3 md:p-6 rounded-lg border-2 border-cyan-200 dark:border-cyan-700 shadow-sm",children:[(0,y.jsxs)("div",{className:"text-xs md:text-sm font-medium text-cyan-700 dark:text-cyan-300 mb-1",children:[(0,y.jsxs)("span",{className:"hidden sm:inline",children:["Take Home (",e.payFrequency,")"]}),(0,y.jsx)("span",{className:"sm:hidden",children:"Pay Period"})]}),(0,y.jsxs)("div",{className:"text-lg md:text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:["$",w((()=>{switch(e.payFrequency){case"Weekly":return P/52;case"Bi-Weekly":return P/26;case"Semi-Monthly":return P/24;default:return P/12}})())]})]}),(0,y.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-3 md:p-6 rounded-lg border-2 border-purple-200 dark:border-purple-700 shadow-sm",children:[(0,y.jsx)("div",{className:"text-xs md:text-sm font-medium text-purple-700 dark:text-purple-300 mb-1",children:"Annual 401K"}),(0,y.jsxs)("div",{className:"text-lg md:text-3xl font-bold text-purple-600 dark:text-purple-400",children:["$",w(H)]})]})]}),(0,y.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,y.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 p-6 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,y.jsx)(o.A,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),(0,y.jsx)("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Earnings"})]}),(0,y.jsxs)("div",{className:"space-y-5",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Pay Frequency"}),(0,y.jsx)("select",{value:"payFrequency"===i?h:e.payFrequency,onChange:async a=>{const s=a.target.value;b("payFrequency"),p(s);try{const a=(0,t.A)((0,t.A)({},e),{},{payFrequency:s}),{monthlyTakeHomePay:n}=S(a),{error:d}=await l.A.from("income").update({payFrequency:s,monthlyTakeHome:n}).eq("id",e.id).eq("user_id",r);d||(b(null),e.payFrequency=s)}catch(n){console.error("Error updating payFrequency:",n)}},className:"w-full px-4 py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer",children:["Weekly","Bi-Weekly","Monthly","Semi-Monthly"].map((e=>(0,y.jsx)("option",{value:e,children:e},e)))})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Yearly Salary"}),(0,y.jsx)("input",{type:"number",value:"yearlySalary"===i?h:e.yearlySalary,onChange:e=>p(e.target.value),onBlur:()=>_("yearlySalary"),onClick:()=>q("yearlySalary"),className:"w-full px-4 py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer"})]})]})]}),(0,y.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 p-6 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,y.jsx)(c,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),(0,y.jsx)("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Retirement"})]}),(0,y.jsxs)("div",{className:"space-y-5",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"401K Contribution (%)"}),(0,y.jsx)("input",{type:"number",value:"retirementContribution"===i?h:e.retirementContribution,onChange:e=>p(e.target.value),onBlur:()=>_("retirementContribution"),onClick:()=>q("retirementContribution"),className:"w-full px-4 py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Employer Match (%)"}),(0,y.jsx)("input",{type:"number",value:"employerMatch"===i?h:e.employerMatch,onChange:e=>p(e.target.value),onBlur:()=>_("employerMatch"),onClick:()=>q("employerMatch"),className:"w-full px-4 py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer"})]})]})]})]}),(0,y.jsx)("div",{className:"mt-8",children:(0,y.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 p-6 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,y.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(x,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),(0,y.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Taxes"})]}),(0,y.jsxs)("button",{onClick:async()=>{if(!r)return;const e={user_id:r,tax_name:"New Tax",percent:0};try{const{error:r}=await l.A.from("taxes").insert([e]);r?(console.error("Error adding tax:",r),alert("Error adding tax: ".concat(r.message))):await C()}catch(a){console.error("Error adding tax:",a)}},className:"flex items-center justify-center gap-2 bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all font-medium w-full sm:w-auto",children:[(0,y.jsx)(m.A,{size:18}),"Add Tax"]})]}),j?(0,y.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Loading taxes..."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"space-y-3",children:0===k.length?(0,y.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,y.jsx)("p",{className:"mb-2",children:"No taxes configured yet."}),(0,y.jsx)("p",{className:"text-sm",children:'Click "Add Tax" to add tax rates.'})]}):k.map((e=>(0,y.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 p-3 sm:p-4 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,y.jsxs)("div",{className:"flex flex-col sm:hidden gap-3",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)("input",{type:"text",value:e.tax_name,onChange:r=>M(e.id,r.target.value),className:"flex-1 min-w-0 px-3 py-2 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all text-sm",placeholder:"Tax name"}),(0,y.jsx)("button",{onClick:()=>{window.confirm('Are you sure you want to delete "'.concat(e.tax_name,'"?'))&&E(e.id)},className:"p-2 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all flex-shrink-0",title:"Delete tax",children:(0,y.jsx)(u.A,{size:18})})]}),(0,y.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Rate"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)("input",{type:"number",step:"0.01",value:e.percent,onChange:r=>F(e.id,r.target.value),className:"w-full px-3 py-2 pr-7 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all text-sm",placeholder:"0.00"}),(0,y.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm font-medium",children:"%"})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Annual Amount"}),(0,y.jsx)("input",{type:"text",value:"$".concat(w(B[e.id]||0)),readOnly:!0,className:"w-full px-3 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg text-gray-800 dark:text-white font-semibold text-sm"})]})]})]}),(0,y.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,y.jsx)("div",{className:"flex-grow",children:(0,y.jsx)("input",{type:"text",value:e.tax_name,onChange:r=>M(e.id,r.target.value),className:"w-full px-4 py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",placeholder:"Tax name"})}),(0,y.jsx)("div",{className:"w-32",children:(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)("input",{type:"number",step:"0.01",value:e.percent,onChange:r=>F(e.id,r.target.value),className:"w-full px-3 py-3 pr-8 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",placeholder:"0.00"}),(0,y.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})}),(0,y.jsx)("div",{className:"w-40",children:(0,y.jsx)("input",{type:"text",value:"$".concat(w(B[e.id]||0)),readOnly:!0,className:"w-full px-4 py-3 bg-gray-100 dark:bg-slate-600/50 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white font-semibold text-center"})}),(0,y.jsx)("button",{onClick:()=>{window.confirm('Are you sure you want to delete "'.concat(e.tax_name,'"?'))&&E(e.id)},className:"p-2 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",title:"Delete tax",children:(0,y.jsx)(u.A,{size:20})})]})]},e.id)))}),k.length>0&&(0,y.jsx)("div",{className:"mt-6 pt-5 border-t-2 border-gray-300 dark:border-gray-600",children:(0,y.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,y.jsx)("label",{className:"text-sm sm:text-base font-bold text-gray-800 dark:text-gray-200 flex-grow",children:"Total Annual Taxes"}),(0,y.jsx)("div",{className:"w-full sm:w-48",children:(0,y.jsx)("input",{type:"text",value:"$".concat(w($)),readOnly:!0,className:"w-full px-4 py-3 bg-blue-100 dark:bg-blue-900/30 border-2 border-blue-300 dark:border-blue-700 rounded-lg text-gray-800 dark:text-white font-bold text-center"})})]})})]})]})})]})}},1184:(e,r,a)=>{a.d(r,{A:()=>t});const t=(0,a(1114).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4440:(e,r,a)=>{a.d(r,{A:()=>t});const t=(0,a(1114).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}}]);
//# sourceMappingURL=768.b5e67d83.chunk.js.map