/*! For license information please see 142.76b55570.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpersonal_finance_tracker=self.webpackChunkpersonal_finance_tracker||[]).push([[142],{2142:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(5043),s=a(3709),l=a(1184);const d=(0,a(1114).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var n=a(225),i=a(2031),c=a(579);const o=()=>{const{purchases:e,budgetGroups:t,refetchPurchases:a}=(0,i.E)(),[o,u]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),[m,g]=(0,r.useState)(""),[b,p]=(0,r.useState)(1),k=(e,t)=>{switch(h(e),u(t.id),e){case"timestamp":g(new Date(t.timestamp).toISOString().split("T")[0]);break;case"itemName":g(t.item_name);break;case"cost":g(t.cost);break;case"budgetItemId":g(t.budget_item_id);break;default:g("")}},y=async(e,t)=>{try{const r={};switch(e){case"timestamp":r.timestamp=new Date(t+"T00:00:00Z").toISOString();break;case"itemName":r.item_name=t.trim();break;case"cost":r.cost=parseFloat(t)||0;break;case"budgetItemId":r.budget_item_id=t}const{error:l}=await s.A.from("purchases").update(r).eq("id",o);if(l)throw l;u(null),h(null),g(""),await a()}catch(r){console.error("Error updating ".concat(e,":"),r),alert("Failed to update ".concat(e,". Please try again."))}},w=Math.ceil(e.length/10),v=10*(b-1),j=v+10,f=e.slice(v,j);return(0,c.jsxs)("div",{className:"w-full max-w-screen overflow-x-auto p-6 bg-white dark:bg-slate-800 shadow-lg rounded-lg",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 dark:text-white mb-6",children:"Purchases"}),(0,c.jsx)("div",{className:"w-full overflow-x-auto",children:(0,c.jsxs)("div",{className:"inline-block min-w-full align-middle",children:[(0,c.jsxs)("table",{className:"min-w-full table-auto border dark:border-gray-600 bg-gray-50 dark:bg-slate-700 rounded-md",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"bg-gray-100 dark:bg-slate-600",children:[(0,c.jsx)("th",{className:"p-3 text-left text-gray-700 dark:text-gray-200",children:"Date"}),(0,c.jsx)("th",{className:"p-3 text-left text-gray-700 dark:text-gray-200",children:"Item Name"}),(0,c.jsx)("th",{className:"p-3 text-left text-gray-700 dark:text-gray-200",children:"Cost"}),(0,c.jsx)("th",{className:"p-3 text-left text-gray-700 dark:text-gray-200",children:"Budget Item"}),(0,c.jsx)("th",{className:"p-3 w-10"})]})}),(0,c.jsx)("tbody",{children:f.map((e=>{var r;return(0,c.jsxs)("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-slate-600",children:[(0,c.jsx)("td",{onClick:()=>k("timestamp",e),className:"p-2 text-gray-800 dark:text-white",children:"timestamp"===x&&o===e.id?(0,c.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),onBlur:()=>{y("timestamp",m),h(null),u(null)},className:"w-full px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-slate-600 text-gray-800 dark:text-white",autoFocus:!0}):new Date(e.timestamp).toLocaleDateString(void 0,{month:"numeric",day:"numeric"})}),(0,c.jsx)("td",{onClick:()=>k("itemName",e),className:"p-2 truncate text-gray-800 dark:text-white",style:{maxWidth:"6ch",overflow:"hidden",whiteSpace:"nowrap"},children:"itemName"===x&&o===e.id?(0,c.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),onBlur:()=>{y("itemName",m),h(null),u(null)},className:"w-full px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-slate-600 text-gray-800 dark:text-white",autoFocus:!0}):e.item_name}),(0,c.jsx)("td",{onClick:()=>k("cost",e),className:"p-2 text-gray-800 dark:text-white",children:"cost"===x&&o===e.id?(0,c.jsx)("input",{type:"number",value:m,onChange:e=>g(e.target.value),onBlur:()=>{y("cost",m),h(null),u(null)},className:"w-full px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-slate-600 text-gray-800 dark:text-white",min:"0",step:"0.01",autoFocus:!0}):"$".concat(e.cost.toFixed(2))}),(0,c.jsx)("td",{onClick:()=>k("budgetItemId",e),className:"p-2 text-overflow:ellipsis text-gray-800 dark:text-white",children:"budgetItemId"===x&&o===e.id?(0,c.jsxs)("select",{value:m,onChange:e=>{const t=e.target.value;g(t),y("budgetItemId",t)},onBlur:()=>{h(null),u(null)},className:"w-full px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-slate-600 text-gray-800 dark:text-white",autoFocus:!0,children:[(0,c.jsx)("option",{value:"",children:"Select a budget item"}),t.map((e=>{var t;return(0,c.jsx)("optgroup",{label:e.name,children:null===(t=e.budget_items)||void 0===t?void 0:t.map((e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id)))},e.id)}))]}):null===(r=e.budget_items)||void 0===r?void 0:r.name}),(0,c.jsx)("td",{className:"p-2 text-center",children:(0,c.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this purchase?")&&(async e=>{try{const{error:t}=await s.A.from("purchases").delete().eq("id",e);if(t)throw t;await a()}catch(t){console.error("Error deleting purchase:",t),alert("Failed to delete purchase. Please try again.")}})(e.id)},className:"text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors",children:(0,c.jsx)(l.A,{size:20})})})]},e.id)}))})]}),(0,c.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",v+1," to ",Math.min(j,e.length)," ","of ",e.length," purchases"]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("button",{onClick:()=>{b>1&&p(b-1)},disabled:1===b,className:"p-2 rounded ".concat(1===b?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"),children:(0,c.jsx)(d,{size:20})}),(0,c.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",b," of ",w]}),(0,c.jsx)("button",{onClick:()=>{b<w&&p(b+1)},disabled:b===w,className:"p-2 rounded ".concat(b===w?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"),children:(0,c.jsx)(n.A,{size:20})})]})]})]})})]})}},225:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(1114).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1184:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(1114).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=142.76b55570.chunk.js.map