"use strict";(self.webpackChunkpersonal_finance_tracker=self.webpackChunkpersonal_finance_tracker||[]).push([[334],{5983:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(9379),s=a(5043),n=a(256),o=a(7669),i=a(6478),c=a(2107),l=a(3709),d=a(2031),m=a(579);const u=()=>{const{userId:e,refetchPurchases:t}=(0,d.E)(),a=(0,s.useRef)(null),[u,h]=(0,s.useState)(""),[g,p]=(0,s.useState)({itemName:"",cost:"",date:""}),[x,b]=(0,s.useState)([]),[y,f]=(0,s.useState)([]),[w,v]=(0,s.useState)(""),k=e=>{try{if(!e.trim())return void v("No data provided");const t=(e=>{const t=e.split("\n")[0];if(!t)return null;const a=["\t",",",";"].map((e=>({delimiter:e,count:(t.match(new RegExp(e,"g"))||[]).length}))).reduce(((e,t)=>t.count>e.count?t:e),{delimiter:null,count:0});return a.count>0?a.delimiter:null})(e);if(!t)return void v("Could not detect a valid delimiter (tab, comma, or semicolon)");const a=e.trim().split("\n").map((e=>e.trim()));if(a.length<2)return void v("At least two lines are required (headers and data)");const r=a[0].split(t).map((e=>e.trim()));if(r.length<2)return void v("Only found ".concat(r.length," column(s). Please check the format."));const s=a.slice(1).map((e=>{const a=e.split(t).map((e=>e.trim()));return r.reduce(((e,t,r)=>(e[t]=a[r]||"",e)),{})}));f(r),b(s),v("")}catch(t){console.error("Parsing error:",t),v("Parsing error: ".concat(t.message)),b([])}},j=(e,t)=>{p((a=>(0,r.A)((0,r.A)({},a),{},{[e]:t})))},N=e=>{if(!e)return(new Date).toISOString();const t=new Date(e);return isNaN(t.getTime())?(new Date).toISOString():t.toISOString()};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("button",{onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.showModal()},className:"w-full bg-green-500 dark:bg-green-600 text-white py-2 rounded-md hover:bg-green-600 dark:hover:bg-green-700 transition-colors flex items-center justify-center mt-4",children:[(0,m.jsx)(n.A,{className:"mr-2",size:20}),"Bulk Import"]}),(0,m.jsx)("dialog",{ref:a,className:"w-full max-w-3xl rounded-lg p-6 backdrop:bg-black backdrop:bg-opacity-50 bg-white dark:bg-slate-800",children:(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Bulk Import Purchases"}),(0,m.jsx)("button",{onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.close()},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:(0,m.jsx)(o.A,{size:20})})]}),w&&(0,m.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 dark:border-red-600 p-4 text-red-700 dark:text-red-300",children:(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)(i.A,{className:"h-5 w-5 mr-2"}),(0,m.jsx)("span",{children:w})]})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-200",children:"Paste your data (tab, comma, or semicolon separated):"}),(0,m.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:["Example format:",(0,m.jsx)("br",{}),"Item Name,Cost,Date",(0,m.jsx)("br",{}),"Groceries,45.99,2024-02-14"]}),(0,m.jsx)("textarea",{value:u,onChange:e=>{const t=e.target.value;h(t),k(t)},className:"w-full h-32 p-2 border dark:border-gray-600 rounded-md font-mono text-sm bg-white dark:bg-slate-700 text-gray-800 dark:text-white",placeholder:"Item Name,Cost,Date"})]}),y.length>0&&(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Map Columns"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-200",children:"Item Name*"}),(0,m.jsxs)("select",{value:g.itemName,onChange:e=>j("itemName",e.target.value),className:"w-full p-2 border dark:border-gray-600 rounded-md bg-white dark:bg-slate-700 text-gray-800 dark:text-white",children:[(0,m.jsx)("option",{value:"",children:"Select column"}),y.map((e=>(0,m.jsx)("option",{value:e,children:e},e)))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-200",children:"Cost*"}),(0,m.jsxs)("select",{value:g.cost,onChange:e=>j("cost",e.target.value),className:"w-full p-2 border dark:border-gray-600 rounded-md bg-white dark:bg-slate-700 text-gray-800 dark:text-white",children:[(0,m.jsx)("option",{value:"",children:"Select column"}),y.map((e=>(0,m.jsx)("option",{value:e,children:e},e)))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-200",children:"Date (Optional)"}),(0,m.jsxs)("select",{value:g.date,onChange:e=>j("date",e.target.value),className:"w-full p-2 border dark:border-gray-600 rounded-md bg-white dark:bg-slate-700 text-gray-800 dark:text-white",children:[(0,m.jsx)("option",{value:"",children:"Select column"}),y.map((e=>(0,m.jsx)("option",{value:e,children:e},e)))]})]})]}),x.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:["Preview (",x.length," rows)"]}),(0,m.jsx)("div",{className:"max-h-48 overflow-auto border dark:border-gray-600 rounded-md",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,m.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-700",children:(0,m.jsx)("tr",{children:y.map((e=>(0,m.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e},e)))})}),(0,m.jsx)("tbody",{className:"bg-white dark:bg-slate-600 divide-y divide-gray-200 dark:divide-gray-600",children:x.slice(0,5).map(((e,t)=>(0,m.jsx)("tr",{children:y.map((t=>(0,m.jsx)("td",{className:"px-4 py-2 text-sm text-gray-800 dark:text-white",children:e[t]},t)))},t)))})]})})]})]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t dark:border-gray-600",children:[(0,m.jsxs)("button",{onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.close()},className:"px-4 py-2 border dark:border-gray-600 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-800 dark:text-white",children:[(0,m.jsx)(o.A,{className:"mr-2 inline-block",size:16}),"Cancel"]}),(0,m.jsxs)("button",{onClick:async()=>{const t=g.itemName?g.cost?null:"Cost mapping is required":"Item Name mapping is required";if(t)v(t);else try{var r;const t=x.map((t=>{var a;return{item_name:(null===(a=t[g.itemName])||void 0===a?void 0:a.trim())||"",cost:parseFloat(t[g.cost])||0,user_id:e,budget_item_id:null,timestamp:N(g.date?t[g.date]:null)}})).filter((e=>e.item_name&&!isNaN(e.cost))),{error:s}=await l.A.from("purchases").insert(t);if(s)throw s;alert("Purchases imported successfully!"),null===(r=a.current)||void 0===r||r.close(),h(""),b([]),p({itemName:"",cost:"",date:""})}catch(w){console.error("Error importing purchases:",w),v("Failed to import purchases. Please try again.")}},disabled:!x.length||!g.itemName||!g.cost,className:"px-4 py-2 bg-blue-500 dark:bg-blue-600 text-white rounded-md hover:bg-blue-600 dark:hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,m.jsx)(c.A,{className:"mr-2 inline-block",size:16}),"Import"]})]})]})})]})}},8334:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(9379),s=a(5043),n=a(6983),o=a(920),i=a(5349),c=a(7669),l=a(7473),d=a(7750),m=a(1238),u=a(3709),h=a(5983),g=a(205),p=a(885),x=a(9554),b=a(579);const y=()=>{const[e,t]=(0,s.useState)(null),{theme:a,setTheme:y}=(0,g.D)(),[f,w]=(0,s.useState)(!1),[v,k]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[_,I]=(0,s.useState)(null),[A,S]=(0,s.useState)(!1);(0,s.useEffect)((()=>{w(!0)}),[]),(0,s.useEffect)((()=>{(async()=>{const{data:{user:e}}=await u.A.auth.getUser();if(e){t(e.id);const{data:r}=await u.A.from("profiles").select("simplefin_access_url").eq("id",e.id).single();if(null!==r&&void 0!==r&&r.simplefin_access_url)try{const t=(0,p.jO)(r.simplefin_access_url,e.id);t&&t.startsWith("http")&&k(t)}catch(a){console.error("Error decrypting SimpleFin URL:",a)}}})()}),[]);return(0,b.jsxs)("div",{className:"w-full mx-auto p-6 bg-white dark:bg-slate-800 shadow-lg rounded-lg",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 dark:text-white mb-6",children:"Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[f&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 dark:hover:bg-slate-700 rounded-md",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Dark Mode"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Toggle dark/light theme"})]}),(0,b.jsx)("button",{onClick:()=>y("dark"===a?"light":"dark"),className:"p-2 rounded-lg bg-gray-200 dark:bg-slate-600 hover:bg-gray-300 dark:hover:bg-slate-500 transition-colors","aria-label":"Toggle theme",children:"dark"===a?(0,b.jsx)(n.A,{className:"w-5 h-5 text-gray-700 dark:text-gray-200"}):(0,b.jsx)(o.A,{className:"w-5 h-5 text-gray-700 dark:text-gray-200"})})]}),v&&(0,b.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4 pb-4 space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"SimpleFin Sync"}),(0,b.jsxs)("button",{onClick:async()=>{if(v&&e){N(!0);try{const{data:t}=await u.A.from("accounts").select("*").eq("user_id",e),a=(t||[]).map((t=>(0,r.A)((0,r.A)({},t),{},{value:(0,p.pN)(t.value,e),interest_rate:(0,p.pN)(t.interest_rate,e),montly_contribution:(0,p.pN)(t.montly_contribution,e)}))),{accountsToCreate:s,accountsToUpdate:n}=await(0,x.cw)(v,a);console.log("Sync results:",{toCreate:s.length,toUpdate:n.length,newAccounts:s});for(const o of s){console.log("Creating new account:",o);const t=(0,p.Rb)(o.value,e),a=(0,p.Rb)(o.interest_rate,e),s=(0,p.Rb)(o.montly_contribution,e),{data:n,error:i}=await u.A.from("accounts").insert([(0,r.A)((0,r.A)({},o),{},{value:t,interest_rate:a,montly_contribution:s,user_id:e})]).select();if(i)throw console.error("Error inserting account:",i),i;console.log("Account created successfully:",n)}for(const r of n){const t=(0,p.Rb)(r.value,e),a=(0,p.Rb)(r.interest_rate,e),s=(0,p.Rb)(r.montly_contribution,e);await u.A.from("accounts").update({value:t,interest_rate:a,montly_contribution:s,account_type:r.account_type,type:r.type,last_synced:r.last_synced,is_simplefin_synced:!0}).eq("id",r.id)}I(new Date)}catch(t){console.error("SimpleFin sync error:",t),alert("Failed to sync accounts. Please try again.")}finally{N(!1)}}},disabled:j,className:"w-full flex items-center justify-center gap-2 p-3 text-sm font-medium text-white bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-800 rounded-md transition-colors disabled:opacity-50",children:[(0,b.jsx)(i.A,{className:"w-4 h-4 ".concat(j?"animate-spin":"")}),j?"Syncing...":"Sync Accounts Now"]}),_&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Last synced: ",_.toLocaleTimeString()]}),(0,b.jsxs)("button",{onClick:()=>S(!0),className:"w-full flex items-center justify-center gap-2 p-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-md transition-colors",children:[(0,b.jsx)(c.A,{className:"w-4 h-4"}),"Disconnect SimpleFin"]})]}),(0,b.jsxs)("button",{onClick:async()=>{try{const{data:t,error:a}=await u.A.from("budget_groups").select("*").eq("id",e);if(a)throw a;const{data:r,error:s}=await u.A.from("budget_items").select("*").eq("id",e);if(s)throw s;const{data:n,error:o}=await u.A.from("purchases").select("*").eq("id",e);if(o)throw o;const i=r.map((e=>{const a=t.find((t=>t.id===e.group_id));return{Group:(null===a||void 0===a?void 0:a.name)||"Unknown",ItemName:e.name,Budget:e.budget,ItemID:e.id}})),c=n.map((e=>({ItemName:e.item_name,Cost:e.cost,BudgetGroup:e.budget_item_id,Timestamp:new Date(e.timestamp).toLocaleString()}))),l=m.Wp.book_new(),d=m.Wp.json_to_sheet(i);m.Wp.book_append_sheet(l,d,"Budget Items");const h=m.Wp.json_to_sheet(c);m.Wp.book_append_sheet(l,h,"Purchases");const g=m.Wp.json_to_sheet(t);m.Wp.book_append_sheet(l,g,"Budget Groups"),m._h(l,"Budget_Export.xlsx")}catch(t){throw console.error("Error exporting data to Excel: ",t),t}},className:"w-full flex items-center justify-center gap-2 p-2 text-sm font-medium text-white bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800 rounded-md transition-colors",children:[(0,b.jsx)(l.A,{className:"w-4 h-4"}),"Export Data"]}),(0,b.jsx)(h.A,{}),(0,b.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:(0,b.jsxs)("button",{onClick:async()=>{try{const{error:e}=await u.A.auth.signOut();if(e)throw e;window.location.href="/"}catch(e){console.error("Error signing out:",e)}},className:"w-full flex items-center justify-center gap-2 p-2 text-sm font-medium text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",children:[(0,b.jsx)(d.A,{className:"w-4 h-4"}),"Sign Out"]})})]}),A&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl max-w-md w-full p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Disconnect SimpleFin?"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Your synced accounts will remain, but they will no longer automatically update. You can reconnect SimpleFin anytime from the Accounts page."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2.5 bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-gray-200 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:async()=>{try{await u.A.from("profiles").update({simplefin_access_url:null}).eq("id",e),k(null),I(null),S(!1)}catch(t){console.error("Error disconnecting SimpleFin:",t),alert("Failed to disconnect SimpleFin.")}},className:"flex-1 px-4 py-2.5 bg-red-500 dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Disconnect"})]})]})})]})}},9554:(e,t,a)=>{a.d(t,{Mc:()=>s,cw:()=>o});var r=a(9379);async function s(e){try{const a=atob(e.trim());if(!a.startsWith("http"))throw new Error("Invalid setup token format");try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.text();if(t&&t.startsWith("http"))return t.trim()}}catch(t){}const r="https://gzuyfuwdajaqwvkcptuf.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6dXlmdXdkYWphcXd2a2NwdHVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MzkwMjYsImV4cCI6MjA1MzUxNTAyNn0.bm_usDFy_wYZtI643RAEYxrl24jk6CYtYVwWjpMaZGI",n=await fetch("".concat(r,"/functions/v1/simplefin-proxy"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({url:a,method:"POST"})}),o=await n.text();if(!n.ok){if(429===n.status)throw new Error("RATE_LIMIT: Too many requests. Please wait a moment and try again.");throw new Error("Edge Function error (".concat(n.status,"): ").concat(o))}const i=o;if(!i||!i.startsWith("http"))throw new Error("Invalid response from SimpleFin");return i.trim()}catch(a){if("RATE_LIMIT"===a.message)throw a;if("InvalidCharacterError"===a.name)throw new Error("Invalid setup token. Please check and try again.");throw new Error("Failed to claim access URL: ".concat(a.message))}}function n(e){var t;let a=0;void 0!==e.balance&&null!==e.balance&&(a=parseFloat(e.balance)),0===a&&void 0!==e.available_balance&&null!==e.available_balance&&(a=parseFloat(e.available_balance));let r="other";const s=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"";return s.includes("checking")||s.includes("debit")?r="checking":s.includes("savings")?r="savings":s.includes("credit")||a<0?r="credit":s.includes("loan")||s.includes("mortgage")?r="loan":(s.includes("investment")||s.includes("brokerage")||s.includes("401k")||s.includes("ira"))&&(r="investment"),"credit"!==r&&"loan"!==r||(a=Math.abs(a)),{simplefin_id:e.id,name:e.name||"Unnamed Account",account_type:r,value:a,is_simplefin_synced:!0,last_synced:(new Date).toISOString(),interest_rate:0,montly_contribution:0,type:"credit"===r||"loan"===r?"Loan":"Investment"}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var a;const s=await async function(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;for(let s=0;s<a;s++)try{return await e()}catch(r){if(t=r,r.message.startsWith("UNAUTHORIZED")||r.message.includes("Invalid setup token")||r.message.includes("Invalid access URL"))throw r;if(r.message.startsWith("RATE_LIMIT")){const e=r.message.split(":"),t=e.length>1?parseInt(e[1]):60;if(s<a-1){await new Promise((e=>setTimeout(e,1e3*t)));continue}throw r}if(s<a-1){const e=1e3*Math.pow(2,s);await new Promise((t=>setTimeout(t,e)))}}throw t}((()=>async function(e){try{var t;if(!e||!e.startsWith("http"))throw new Error("Invalid access URL");const s="".concat(e,"/accounts");console.log("Fetching from SimpleFin, URL (masked):",e.substring(0,30)+"...");try{const e=await fetch(s,{method:"GET",headers:{Accept:"application/json"}});if(e.ok){var a;const t=await e.json();return console.log("Got response from direct connection, accounts:",null===t||void 0===t||null===(a=t.accounts)||void 0===a?void 0:a.length),t}}catch(r){console.log("Direct connection failed, using Edge Function")}const n="https://gzuyfuwdajaqwvkcptuf.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6dXlmdXdkYWphcXd2a2NwdHVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MzkwMjYsImV4cCI6MjA1MzUxNTAyNn0.bm_usDFy_wYZtI643RAEYxrl24jk6CYtYVwWjpMaZGI",i=await fetch("".concat(n,"/functions/v1/simplefin-proxy"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({url:s,method:"GET"})});if(console.log("Edge Function response status:",i.status),!i.ok){if(429===i.status){const e=i.headers.get("Retry-After");throw new Error("RATE_LIMIT:".concat(e||"60"))}if(401===i.status||403===i.status)throw new Error("UNAUTHORIZED: Access URL is invalid or expired. Please reconnect SimpleFin.");throw new Error("Failed to fetch accounts: ".concat(i.statusText))}const c=await i.json();return console.log("Got response from Edge Function, accounts:",null===c||void 0===c||null===(t=c.accounts)||void 0===t?void 0:t.length),console.log("Raw SimpleFin data:",c),c}catch(s){if(s.message.startsWith("RATE_LIMIT")||s.message.startsWith("UNAUTHORIZED"))throw s;throw new Error("Failed to fetch accounts: ".concat(s.message))}}(e)));if(console.log("SimpleFin API returned:",s),console.log("Number of accounts from SimpleFin:",null===s||void 0===s||null===(a=s.accounts)||void 0===a?void 0:a.length),console.log("Existing accounts in database:",t.length),!s||!s.accounts||!Array.isArray(s.accounts))throw new Error("Invalid response format from SimpleFin");const o=[],i=[];for(const e of s.accounts){console.log("Processing SimpleFin account:",e.name,"ID:",e.id);const a=n(e);console.log("Mapped to:",a);const s=t.find((e=>e.simplefin_id===a.simplefin_id));s?(console.log("Account exists, will update:",s.name),i.push((0,r.A)((0,r.A)({id:s.id},a),{},{interest_rate:s.interest_rate,montly_contribution:s.montly_contribution,name:s.name||a.name}))):(console.log("New account detected:",a.name),o.push(a))}return console.log("Final sync summary:",{fromSimpleFin:s.accounts.length,inDatabase:t.length,toCreate:o.length,toUpdate:i.length}),{accountsToCreate:o,accountsToUpdate:i,totalSynced:s.accounts.length}}catch(s){throw s}}}}]);
//# sourceMappingURL=334.2965668d.chunk.js.map