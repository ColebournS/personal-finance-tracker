/*! For license information please see 768.ce34eb8b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpersonal_finance_tracker=self.webpackChunkpersonal_finance_tracker||[]).push([[768],{768:(e,r,t)=>{t.r(r),t.d(r,{default:()=>b});var a=t(9379),s=t(5043),d=t(3709),n=t(2031),l=t(4440),o=t(1114);const i=(0,o.A)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]),c=(0,o.A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var x=t(6450),m=t(1184),g=t(4401),u=t(885),y=t(579);const b=function(){const{income:e,userId:r,refetchIncome:t}=(0,n.E)(),[o,b]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[k,f]=(0,s.useState)([]),[v,j]=(0,s.useState)(!0),w=(0,s.useRef)({}),N=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),A=(0,s.useCallback)((async()=>{if(!r)return!1;const e=[{user_id:r,tax_name:"Federal Tax",percent:0},{user_id:r,tax_name:"Medicare",percent:0},{user_id:r,tax_name:"Social Security Tax",percent:0},{user_id:r,tax_name:"State Tax",percent:0}];try{const{error:r}=await d.A.from("taxes").insert(e);return!r||(console.error("Error initializing default taxes:",r),!1)}catch(t){return console.error("Error initializing default taxes:",t),!1}}),[r]),C=(0,s.useCallback)((async()=>{if(r){j(!0);try{const{data:e,error:t}=await d.A.from("taxes").select("*").eq("user_id",r).order("tax_name",{ascending:!0});if(t)throw t;if(e&&0!==e.length)f(e);else{if(await A()){const{data:e,error:t}=await d.A.from("taxes").select("*").eq("user_id",r).order("tax_name",{ascending:!0});t||f(e||[])}}}catch(e){console.error("Error fetching taxes:",e),f([])}finally{j(!1)}}}),[r,A]);(0,s.useEffect)((()=>{C()}),[C]);const _=(0,s.useCallback)((function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;w.current[e]&&clearTimeout(w.current[e]),w.current[e]=setTimeout(r,t)}),[]),F=s=>{r&&_("income-".concat(s),(async()=>{try{const n="payFrequency"===s?h:Number(h),l=(0,a.A)((0,a.A)({},e),{},{[s]:n}),{monthlyTakeHomePay:o}=H(l);let i=n;"yearlySalary"!==s&&"retirementContribution"!==s&&"employerMatch"!==s||(i=(0,u.Rb)(n,r));const c=(0,u.Rb)(o,r),{error:x}=await d.A.from("income").update({[s]:i,monthlyTakeHome:c}).eq("id",e.id).eq("user_id",r);x?console.error("Error updating income data:",x):(b(null),await t())}catch(n){console.error("Unexpected error:",n)}}))},T=r=>{p(e[r]),b(r)},M=(e,r)=>{const t=parseFloat(r)||0;f((r=>r.map((r=>r.id===e?(0,a.A)((0,a.A)({},r),{},{percent:t}):r)))),_("tax-".concat(e),(async()=>{const{error:r}=await d.A.from("taxes").update({percent:t}).eq("id",e);r&&(console.error("Error updating tax:",r),C())}))},q=(e,r)=>{f((t=>t.map((t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{tax_name:r}):t)))),_("tax-name-".concat(e),(async()=>{const{error:t}=await d.A.from("taxes").update({tax_name:r}).eq("id",e);t&&(console.error("Error updating tax name:",t),C())}))},S=async()=>{if(!r)return;const e={user_id:r,tax_name:"New Tax",percent:0};try{const{error:r}=await d.A.from("taxes").insert([e]);r?(console.error("Error adding tax:",r),alert("Error adding tax: ".concat(r.message))):await C()}catch(t){console.error("Error adding tax:",t)}},E=async e=>{f((r=>r.filter((r=>r.id!==e))));try{const{error:r}=await d.A.from("taxes").delete().eq("id",e);r&&(console.error("Error deleting tax:",r),alert("Error deleting tax: ".concat(r.message)),C())}catch(r){console.error("Error deleting tax:",r),C()}},H=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;const{yearlySalary:t=0,retirementContribution:a=0,employerMatch:s=0}=r,d=t*(a/100),n=d+t*(s/100),l=k.reduce(((e,r)=>e+t*(r.percent/100)),0),o=t-l-d,i=k.reduce(((e,r)=>(e[r.id]=t*(r.percent/100),e)),{});return{totalAnnual401K:Number(n.toFixed(2)),takeHomePay:Number(o.toFixed(2)),monthlyTakeHomePay:Number((o/12).toFixed(4)),totalTaxes:Number(l.toFixed(2)),taxAmounts:i}},{totalAnnual401K:P,takeHomePay:D,monthlyTakeHomePay:$,totalTaxes:z,taxAmounts:B}=H(),I=()=>(0,y.jsxs)("div",{className:"md:col-span-3 bg-white dark:bg-slate-800 md:bg-gray-50 md:dark:bg-slate-700/50 p-2 md:p-6 rounded-lg border border-gray-200 dark:border-gray-700 md:dark:border-gray-600 shadow-xl md:shadow-none",children:[(0,y.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-2 mb-2 md:mb-6",children:[(0,y.jsx)(l.A,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600 dark:text-gray-400"}),(0,y.jsx)("h2",{className:"text-sm md:text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Earnings"})]}),(0,y.jsxs)("div",{className:"space-y-2 md:space-y-5",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Pay Frequency"}),(0,y.jsx)("select",{value:"payFrequency"===o?h:e.payFrequency,onChange:async t=>{const s=t.target.value;b("payFrequency"),p(s);try{const t=(0,a.A)((0,a.A)({},e),{},{payFrequency:s}),{monthlyTakeHomePay:n}=H(t),{error:l}=await d.A.from("income").update({payFrequency:s,monthlyTakeHome:n}).eq("id",e.id).eq("user_id",r);l||(b(null),e.payFrequency=s)}catch(n){console.error("Error updating payFrequency:",n)}},className:"w-full px-3 py-2 md:px-4 md:py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-sm md:text-base text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer",children:["Weekly","Bi-Weekly","Monthly","Semi-Monthly"].map((e=>(0,y.jsx)("option",{value:e,children:e},e)))})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Yearly Salary"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)("span",{className:"absolute left-3 md:left-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm md:text-base",children:"$"}),(0,y.jsx)("input",{type:"yearlySalary"===o?"number":"text",value:"yearlySalary"===o?h:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e.yearlySalary||0),onChange:e=>p(e.target.value),onBlur:()=>F("yearlySalary"),onClick:()=>T("yearlySalary"),className:"w-full pl-7 md:pl-9 pr-3 py-2 md:pr-4 md:py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-sm md:text-base text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer"})]})]})]})]}),R=()=>(0,y.jsxs)("div",{className:"md:col-span-3 bg-white dark:bg-slate-800 md:bg-gray-50 md:dark:bg-slate-700/50 p-2 md:p-6 rounded-lg border border-gray-200 dark:border-gray-700 md:dark:border-gray-600 shadow-xl md:shadow-none",children:[(0,y.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-2 mb-2 md:mb-6",children:[(0,y.jsx)(i,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600 dark:text-gray-400"}),(0,y.jsx)("h2",{className:"text-sm md:text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Retirement"})]}),(0,y.jsxs)("div",{className:"space-y-2 md:space-y-5",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"401K Contribution"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)("input",{type:"number",value:"retirementContribution"===o?h:e.retirementContribution,onChange:e=>p(e.target.value),onBlur:()=>F("retirementContribution"),onClick:()=>T("retirementContribution"),className:"w-full pl-3 pr-8 py-2 md:pl-4 md:pr-10 md:py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-sm md:text-base text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer"}),(0,y.jsx)("span",{className:"absolute right-3 md:right-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm md:text-base",children:"%"})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Employer Match"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)("input",{type:"number",value:"employerMatch"===o?h:e.employerMatch,onChange:e=>p(e.target.value),onBlur:()=>F("employerMatch"),onClick:()=>T("employerMatch"),className:"w-full pl-3 pr-8 py-2 md:pl-4 md:pr-10 md:py-3 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded-lg text-sm md:text-base text-gray-800 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all cursor-pointer"}),(0,y.jsx)("span",{className:"absolute right-3 md:right-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm md:text-base",children:"%"})]})]})]})]}),V=()=>(0,y.jsxs)("div",{className:"md:col-span-6 bg-white dark:bg-slate-800 md:bg-gray-50 md:dark:bg-slate-700/50 p-2 md:p-6 rounded-lg border border-gray-200 dark:border-gray-700 md:dark:border-gray-600 shadow-xl md:shadow-none",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2 md:mb-6",children:[(0,y.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-2",children:[(0,y.jsx)(c,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600 dark:text-gray-400"}),(0,y.jsx)("h2",{className:"text-sm md:text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Taxes"})]}),(0,y.jsx)("button",{onClick:S,className:"p-2 bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-lg transition-all",title:"Add Tax",children:(0,y.jsx)(x.A,{size:18})})]}),v?(0,y.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"Loading..."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"space-y-2 md:space-y-1 mb-3",children:0===k.length?(0,y.jsxs)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:[(0,y.jsx)("p",{className:"mb-1",children:"No taxes yet"}),(0,y.jsx)("p",{className:"text-xs",children:"Click + to add"})]}):k.map((e=>(0,y.jsxs)("div",{className:"rounded hover:bg-white/50 dark:hover:bg-slate-600/30 transition-colors",children:[(0,y.jsxs)("div",{className:"md:hidden flex items-center gap-1.5 px-2 hover:bg-white/50 dark:hover:bg-slate-600/30 rounded transition-colors",children:[(0,y.jsx)("input",{type:"text",value:e.tax_name,onChange:r=>q(e.id,r.target.value),className:"flex-1 min-w-0 px-2 py-1 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded text-gray-800 dark:text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none text-[10px]",placeholder:"Tax"}),(0,y.jsxs)("div",{className:"relative w-16 flex-shrink-0",children:[(0,y.jsx)("input",{type:"number",step:"0.01",value:e.percent,onChange:r=>M(e.id,r.target.value),className:"w-full px-2 py-1 pr-5 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded text-gray-800 dark:text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none text-[10px]",placeholder:"0"}),(0,y.jsx)("span",{className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-[9px] pointer-events-none",children:"%"})]}),(0,y.jsxs)("div",{className:"w-14 flex-shrink-0 px-2 py-1 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded text-[10px] font-semibold text-gray-700 dark:text-gray-300 text-right truncate",children:["$",(B[e.id]||0)>=1e3?"".concat(((B[e.id]||0)/1e3).toFixed(1),"k"):N(B[e.id]||0)]}),(0,y.jsx)("button",{onClick:()=>{window.confirm('Delete "'.concat(e.tax_name,'"?'))&&E(e.id)},className:"p-1 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-all flex-shrink-0",title:"Delete tax",children:(0,y.jsx)(m.A,{size:13})})]}),(0,y.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[(0,y.jsx)("input",{type:"text",value:e.tax_name,onChange:r=>q(e.id,r.target.value),className:"flex-1 max-w-[200px] px-3 py-1.5 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded text-gray-800 dark:text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none text-sm",placeholder:"Tax name"}),(0,y.jsxs)("div",{className:"relative w-20",children:[(0,y.jsx)("input",{type:"number",step:"0.01",value:e.percent,onChange:r=>M(e.id,r.target.value),className:"w-full px-2 py-1.5 pr-6 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded text-gray-800 dark:text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none text-sm",placeholder:"0.00"}),(0,y.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-xs",children:"%"})]}),(0,y.jsxs)("div",{className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-600 border border-gray-300 dark:border-gray-600 rounded text-sm font-semibold text-gray-700 dark:text-gray-300 text-right",children:["$",N(B[e.id]||0)]}),(0,y.jsx)("button",{onClick:()=>{window.confirm('Delete "'.concat(e.tax_name,'"?'))&&E(e.id)},className:"p-1.5 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-all flex-shrink-0",title:"Delete tax",children:(0,y.jsx)(m.A,{size:16})})]})]},e.id)))}),k.length>0&&(0,y.jsx)("div",{className:"pt-3 mt-2 border-t border-gray-300 dark:border-gray-600",children:(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsx)("span",{className:"text-sm md:text-base font-bold text-gray-800 dark:text-gray-200",children:"Total Annual"}),(0,y.jsxs)("span",{className:"text-base md:text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",N(z)]})]})})]})]});return(0,y.jsxs)("div",{className:"space-y-2 md:space-y-4",children:[(0,y.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4",children:[(0,y.jsxs)("div",{className:"bg-green-50/50 dark:bg-green-900/10 p-2 md:p-4 rounded-lg",children:[(0,y.jsx)("div",{className:"text-[10px] md:text-xs font-medium text-green-600 dark:text-green-400 mb-0.5 md:mb-1 uppercase tracking-wide",children:"Annual Take Home"}),(0,y.jsxs)("div",{className:"text-sm md:text-2xl font-bold text-green-700 dark:text-green-300",children:["$",N(D)]})]}),(0,y.jsxs)("div",{className:"bg-blue-50/50 dark:bg-blue-900/10 p-2 md:p-4 rounded-lg",children:[(0,y.jsx)("div",{className:"text-[10px] md:text-xs font-medium text-blue-600 dark:text-blue-400 mb-0.5 md:mb-1 uppercase tracking-wide",children:"Monthly Take Home"}),(0,y.jsxs)("div",{className:"text-sm md:text-2xl font-bold text-blue-700 dark:text-blue-300",children:["$",N($)]})]}),(0,y.jsxs)("div",{className:"bg-cyan-50/50 dark:bg-cyan-900/10 p-2 md:p-4 rounded-lg",children:[(0,y.jsxs)("div",{className:"text-[10px] md:text-xs font-medium text-cyan-600 dark:text-cyan-400 mb-0.5 md:mb-1 uppercase tracking-wide",children:[(0,y.jsxs)("span",{className:"hidden sm:inline",children:["Take Home (",e.payFrequency,")"]}),(0,y.jsx)("span",{className:"sm:hidden",children:"Pay Period"})]}),(0,y.jsxs)("div",{className:"text-sm md:text-2xl font-bold text-cyan-700 dark:text-cyan-300",children:["$",N((()=>{switch(e.payFrequency){case"Weekly":return D/52;case"Bi-Weekly":return D/26;case"Semi-Monthly":return D/24;default:return D/12}})())]})]}),(0,y.jsxs)("div",{className:"bg-purple-50/50 dark:bg-purple-900/10 p-2 md:p-4 rounded-lg",children:[(0,y.jsx)("div",{className:"text-[10px] md:text-xs font-medium text-purple-600 dark:text-purple-400 mb-0.5 md:mb-1 uppercase tracking-wide",children:"Annual 401K"}),(0,y.jsxs)("div",{className:"text-sm md:text-2xl font-bold text-purple-700 dark:text-purple-300",children:["$",N(P)]})]})]}),(0,y.jsxs)("div",{className:"hidden md:block w-full mx-auto md:p-8 bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,y.jsxs)("div",{className:"flex items-center mb-8",children:[(0,y.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg mr-4",children:(0,y.jsx)(g.A,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),(0,y.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Income & Taxes"})]}),(0,y.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[I(),R(),V()]})]}),(0,y.jsxs)("div",{className:"md:hidden grid grid-cols-2 gap-2",children:[I(),R()]}),(0,y.jsx)("div",{className:"md:hidden",children:V()})]})}},6450:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(1114).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},4401:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(1114).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},1184:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(1114).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4440:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(1114).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}}]);
//# sourceMappingURL=768.ce34eb8b.chunk.js.map